<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Tea | Shop</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
/* ===== GENERAL ===== */
:root{
  --pink:#FF8A9D;
  --pink-2:#FF6F86;
  --muted:#555;
  --card-shadow: 0 10px 30px rgba(0,0,0,0.08);
}
*{box-sizing:border-box}
body{font-family:'Lato',sans-serif;margin:0;background:#fff;color:#333;-webkit-font-smoothing:antialiased;}
header{background:var(--pink);padding:12px 24px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:999;}
header strong{font-family:'Playfair Display',serif;font-size:1.8rem;color:#fff;}
header nav a{color:#fff;margin:0 12px;text-decoration:none;font-weight:600;transition:all .2s;}
header nav a:hover{transform:scale(1.05);color:#ffebf0;}
input,textarea{width:100%;padding:8px;margin:4px 0 10px;border-radius:8px;border:1px solid #ccc;}
.button{background:var(--pink);color:white;border:none;padding:10px 20px;border-radius:30px;font-weight:bold;cursor:pointer;transition:all 0.25s;box-shadow:0 6px 18px rgba(0,0,0,0.12);}
.button:hover{background:var(--pink-2);transform:translateY(-2px);}

/* HERO */
.hero{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:20px;padding:28px;position:relative;overflow:hidden;}
.hero-img{flex:1 1 420px;position:relative;overflow:hidden;border-radius:20px;}
.hero-img img{width:100%;height:100%;object-fit:cover;border-radius:20px;display:block;transition:transform .5s;}
.hero-img img:hover{transform:scale(1.03);}
.hero-text{flex:1 1 320px;text-align:center;padding:0 20px;z-index:2;}
.hero-text h1{font-family:'Playfair Display',serif;font-size:2.2rem;margin:0 0 12px;color:var(--pink);}
.hero-text p{font-size:1.05rem;color:var(--muted);margin-bottom:16px;}

/* PETALS (subtle decorative) */
.petal{position:absolute;border-radius:50%;opacity:0.12;pointer-events:none;animation:floatPetal linear infinite;}
@keyframes floatPetal{0%{transform:translateY(0) scale(1);}100%{transform:translateY(-420px) scale(1);}}

/* BANNER CAROUSEL */
.splash-banner-carousel{position:relative;width:100%;height:300px;max-height:420px;margin:20px auto;overflow:hidden;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,0.08);}
.splash-banner-carousel .slides{display:flex;height:100%;transition:transform .6s ease-in-out;}
.splash-banner-carousel img{width:100%;flex-shrink:0;object-fit:cover;height:100%;}
.splash-banner-carousel .prev,.splash-banner-carousel .next{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.28);color:white;border:none;padding:8px 10px;cursor:pointer;border-radius:50%;font-size:18px;z-index:3;}
.splash-banner-carousel .prev{left:12px;}
.splash-banner-carousel .next{right:12px;}
.splash-banner-carousel .dots{position:absolute;bottom:12px;width:100%;text-align:center;z-index:3;}
.splash-banner-carousel .dot{display:inline-block;width:10px;height:10px;margin:0 6px;background:#fff;border-radius:50%;opacity:0.5;cursor:pointer;}
.splash-banner-carousel .dot.active{opacity:1;}

/* GRID */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:24px;padding:0 24px 80px;}
.card{background:#fff;border-radius:14px;padding:16px;text-align:center;box-shadow:var(--card-shadow);position:relative;transition:transform .22s,box-shadow .22s;}
.card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(255,138,176,0.12);border:1px solid rgba(255,138,176,0.08);}
.card img{width:100%;border-radius:12px;margin-bottom:12px;display:block;transition:transform .35s,filter .35s;}
.card img:hover{transform:scale(1.04);}
.price{font-weight:700;margin:8px 0;color:var(--pink);}
.stock-badge{position:absolute;top:12px;right:12px;width:36px;height:36px;border-radius:50%;background:var(--pink-2);color:#fff;display:flex;align-items:center;justify-content:center;font-size:.85rem;font-weight:700;box-shadow:0 6px 14px rgba(0,0,0,0.12);}
.badge{position:absolute;top:12px;left:12px;background:#FFCE00;color:#333;font-weight:700;padding:6px 10px;border-radius:12px;font-size:.8rem;}

/* Floating Cart */
#floating-cart{position:fixed;bottom:22px;right:22px;background:var(--pink);color:#fff;padding:12px 18px;border-radius:999px;font-weight:700;cursor:pointer;box-shadow:0 10px 30px rgba(0,0,0,0.18);display:flex;align-items:center;gap:10px;z-index:1000;}
#cart-count{background:#fff;color:var(--pink);width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.9rem;}

/* Cart modal */
#cart-modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:all .25s;z-index:10000;}
#cart-modal.show{opacity:1;pointer-events:auto;}
#cart-content{background:#fff;width:92%;max-width:480px;border-radius:14px;padding:20px;max-height:82%;overflow-y:auto;position:relative;box-shadow:0 18px 48px rgba(0,0,0,0.2);}
.cart-item{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px dashed #eee;}
.cart-item div{display:flex;align-items:center;gap:8px;}
.cart-item button{background:var(--pink);color:#fff;border:none;border-radius:8px;padding:6px 10px;cursor:pointer;}

/* Toast */
#toast{position:fixed;bottom:100px;right:22px;background:var(--pink);color:#fff;padding:12px 18px;border-radius:999px;box-shadow:0 10px 30px rgba(0,0,0,0.18);opacity:0;transform:translateY(10px);transition:all .35s;z-index:10001;}
#toast.show{opacity:1;transform:translateY(0);}

/* Responsive */
@media (max-width:700px){
  .hero{padding:18px;}
  .hero-text h1{font-size:1.6rem;}
}
</style>
</head>
<body>

<header>
  <strong>Tea</strong>
  <nav>
    <a href="index.html">Home</a>
    <a href="book.html">Book</a>
    <a href="shop.html">Shop</a>
  </nav>
</header>

<!-- HERO -->
<div class="hero">
  <div class="hero-img">
    <img src="https://images.pexels.com/photos/18459701/pexels-photo-18459701.jpeg" alt="Selfcare & Beauty">
  </div>
  <div class="hero-text">
    <h1>Selfcare and Beauty in Harmony</h1>
    <p>Your journey to radiant confidence starts here</p>
    <button class="button" onclick="location.href='shop.html'">Shop Now</button>
  </div>
  <!-- subtle petals for visual effect -->
  <div class="petal" style="width:80px;height:80px;left:5%;bottom:10%;background:var(--pink);animation-duration:22s;"></div>
  <div class="petal" style="width:50px;height:50px;left:20%;bottom:0;background:#FFD6E0;animation-duration:18s;"></div>
</div>

<!-- SEARCH -->
<input id="search-bar" class="search-bar" type="text" placeholder="Search products/services..." style="width:90%;max-width:480px;margin:18px auto;display:block;padding:10px 14px;border-radius:28px;border:1px solid #e6e6e6;">

<!-- BANNER -->
<div class="splash-banner-carousel" aria-hidden="false">
  <div class="slides">
    <img src="https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg" alt="Makeup 1">
    <img src="https://images.pexels.com/photos/373755/pexels-photo-373755.jpeg" alt="Makeup 2">
    <img src="https://images.pexels.com/photos/322207/pexels-photo-322207.jpeg" alt="Makeup 3">
  </div>
  <button class="prev" aria-label="Previous slide">&#10094;</button>
  <button class="next" aria-label="Next slide">&#10095;</button>
  <div class="dots" role="tablist"></div>
</div>

<!-- PRODUCTS GRID -->
<div class="grid" id="products-grid"></div>

<!-- FLOATING CART -->
<div id="floating-cart" title="Open cart">
  Cart <span id="cart-count">0</span>
</div>

<!-- CART MODAL -->
<div id="cart-modal" role="dialog" aria-modal="true">
  <div id="cart-content">
    <h3>Your Cart</h3>
    <div id="cart-items"></div>
    <p id="cart-total" style="font-weight:bold;margin-top:10px;"></p>
    <label for="cart-address" style="display:block;margin-top:10px;font-weight:bold;">Delivery Address:</label>
    <input type="text" id="cart-address" placeholder="Enter your delivery address">
    <div style="margin-top:14px;display:flex;gap:10px;justify-content:flex-end;">
      <button class="button" id="checkout-btn">Checkout</button>
      <button class="button" id="close-cart-btn" style="background:#ccc;color:#333;">Close</button>
    </div>
  </div>
</div>

<!-- TOAST -->
<div id="toast" role="status" aria-live="polite"></div>

<script>
/* =========================
   Data / Initialisation
   ========================= */
const products = [
  { id:'M001', name:'Red Lipstick', desc:'Bold red lipstick for evening looks', price:1500, stock:10, type:'product', img:'https://images.pexels.com/photos/322207/pexels-photo-322207.jpeg', trending:true },
  { id:'M002', name:'Eyeshadow Palette', desc:'Vibrant palette with matte + shimmer', price:3500, stock:5, type:'product', img:'https://images.pexels.com/photos/373755/pexels-photo-373755.jpeg' },
  { id:'S001', name:'Makeup Consultation', desc:'60min personalised consultation', price:0, stock:999, type:'service', freshaLink:'https://fresha.com' },
  { id:'M003', name:'Foundation', desc:'Full coverage foundation', price:4200, stock:8, type:'product', img:'https://images.unsplash.com/photo-1612197867757-380af0e812a8' },
  { id:'M004', name:'Matte Lipstick', desc:'Long-wear matte finish', price:5250, stock:2, type:'product', img:'https://images.unsplash.com/photo-1611741301707-317db1b3e24e' }
];

// load cart
let cart = JSON.parse(localStorage.getItem('cart')) || [];
const saveCartToStorage = ()=> localStorage.setItem('cart', JSON.stringify(cart));
const cartCountEl = document.getElementById('cart-count');
const toastEl = document.getElementById('toast');

/* =========================
   Helpers
   ========================= */
function formatGYD(n){ return n.toLocaleString(); }
function showToast(msg, timeout=2500){
  toastEl.textContent = msg;
  toastEl.classList.add('show');
  setTimeout(()=>toastEl.classList.remove('show'), timeout);
}
function updateCartCount(){
  const totalQty = cart.reduce((s,i)=>s + (i.quantity||1), 0);
  cartCountEl.textContent = totalQty;
}
function findProductById(id){ return products.find(p=>p.id===id); }

/* =========================
   Render Products
   ========================= */
const grid = document.getElementById('products-grid');

function productCardHTML(p){
  // product vs service template
  const badge = p.type==='service' ? `<span class="badge">Service</span>` : '';
  const stockBadge = p.type==='product' ? `<span class="stock-badge">${p.stock}</span>` : '';
  const priceText = p.type==='product' ? `<p class="price">GYD ${formatGYD(p.price)}</p>` : `<p class="price">Service</p>`;
  const action = p.type==='product'
    ? `<button class="button add-to-cart" data-id="${p.id}" data-price="${p.price}" data-stock="${p.stock}" aria-label="Add ${p.name} to cart">Add to Cart</button>`
    : `<button class="button book-btn" data-link="${p.freshaLink || '#'}" aria-label="Book ${p.name}">Book</button>`;
  const img = p.img ? `<img src="${p.img}" alt="${p.name}">` : `<img src="https://via.placeholder.com/400x300?text=${encodeURIComponent(p.name)}" alt="${p.name}">`;
  return `<div class="card" data-id="${p.id}" data-type="${p.type}">
    ${badge}
    ${stockBadge}
    ${img}
    <h3>${p.name}</h3>
    <p class="description">${p.desc || ''}</p>
    ${priceText}
    ${action}
  </div>`;
}

function renderProducts(filter=''){
  grid.innerHTML = '';
  const list = products.filter(p=>{
    const hay = (p.name + ' ' + (p.desc||'') + ' ' + p.id).toLowerCase();
    return hay.includes(filter.toLowerCase());
  });
  if(list.length===0){
    grid.innerHTML = '<p style="grid-column:1/-1;text-align:center;color:#777;padding:30px 0;">No products found.</p>';
    return;
  }
  grid.innerHTML = list.map(productCardHTML).join('');
  attachCardEventListeners(); // attach listeners after rendering
}

renderProducts();

/* =========================
   Search handling
   ========================= */
const searchBar = document.getElementById('search-bar');
searchBar.addEventListener('input', e=> renderProducts(e.target.value));

/* =========================
   Card Buttons: add-to-cart & book
   ========================= */
function attachCardEventListeners(){
  // Add to cart buttons
  document.querySelectorAll('.add-to-cart').forEach(btn=>{
    btn.onclick = (ev)=>{
      const id = btn.getAttribute('data-id');
      const stock = parseInt(btn.getAttribute('data-stock')||'0',10);
      const prod = findProductById(id);
      if(!prod){ showToast('Product not found'); return; }
      // check existing qty
      const existing = cart.find(it=>it.id===id);
      const currentQty = existing ? existing.quantity : 0;
      if(currentQty + 1 > stock){
        showToast('Stock limit reached');
        return;
      }
      // animate image to cart
      const card = btn.closest('.card');
      const img = card.querySelector('img');
      animateToCart(img);
      // add/increment
      if(existing) existing.quantity = existing.quantity + 1;
      else cart.push({ id: prod.id, name: prod.name, price: prod.price, quantity: 1 });
      saveCartToStorage();
      updateCartCount();
      showToast(`${prod.name} added to cart`);
    };
  });
  // Book buttons (open fresha in new tab)
  document.querySelectorAll('.book-btn').forEach(btn=>{
    btn.onclick = ()=> {
      const link = btn.getAttribute('data-link');
      if(link && link!=='#') window.open(link, '_blank');
      else showToast('Booking link not available');
    };
  });
}

/* =========================
   Add-to-cart fly animation
   ========================= */
function animateToCart(img){
  if(!img) return;
  const imgRect = img.getBoundingClientRect();
  const clone = img.cloneNode(true);
  clone.style.position = 'fixed';
  clone.style.left = imgRect.left + 'px';
  clone.style.top = imgRect.top + 'px';
  clone.style.width = imgRect.width + 'px';
  clone.style.height = imgRect.height + 'px';
  clone.style.transition = 'all 700ms cubic-bezier(.2,.9,.2,1)';
  clone.style.zIndex = 9999;
  document.body.appendChild(clone);
  const cartRect = document.getElementById('floating-cart').getBoundingClientRect();
  // allow layout
  requestAnimationFrame(()=> {
    clone.style.left = (cartRect.left + cartRect.width/2 - 20) + 'px';
    clone.style.top = (cartRect.top + cartRect.height/2 - 20) + 'px';
    clone.style.width = '40px';
    clone.style.height = '40px';
    clone.style.opacity = '0';
    clone.style.transform = 'rotate(20deg)';
  });
  setTimeout(()=> clone.remove(), 800);
}

/* =========================
   Cart modal UI
   ========================= */
const floatingCart = document.getElementById('floating-cart');
const cartModal = document.getElementById('cart-modal');
const cartItemsEl = document.getElementById('cart-items');
const cartTotalEl = document.getElementById('cart-total');
const closeCartBtn = document.getElementById('close-cart-btn');
const checkoutBtn = document.getElementById('checkout-btn');

function renderCart(){
  cartItemsEl.innerHTML = '';
  let total = 0;
  if(cart.length === 0){
    cartItemsEl.innerHTML = '<p>Your cart is empty.</p>';
  } else {
    cart.forEach((it, idx)=>{
      const prod = findProductById(it.id) || {};
      const itemTotal = (it.quantity||1) * (it.price||0);
      total += itemTotal;
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `<div><strong>${it.name}</strong><div style="font-size:.9rem;color:#777">GYD ${formatGYD(it.price)} Ã— ${it.quantity}</div></div>
        <div><button data-idx="${idx}" class="qty-minus">-</button>
        <span style="margin:0 8px;">${it.quantity}</span>
        <button data-idx="${idx}" class="qty-plus">+</button>
        <button data-idx="${idx}" class="remove-item" style="margin-left:10px;background:#f44336;">Remove</button></div>`;
      cartItemsEl.appendChild(div);
    });
  }
  cartTotalEl.textContent = `Total: GYD ${formatGYD(total)}`;
  // attach qty/remove handlers
  cartItemsEl.querySelectorAll('.qty-plus').forEach(b=>{
    b.onclick = ()=> {
      const i = parseInt(b.getAttribute('data-idx'),10);
      const prod = findProductById(cart[i].id);
      if(prod && cart[i].quantity < prod.stock){
        cart[i].quantity++;
        saveCartToStorage(); renderCart(); updateCartCount();
      } else showToast('Stock limit');
    };
  });
  cartItemsEl.querySelectorAll('.qty-minus').forEach(b=>{
    b.onclick = ()=>{
      const i = parseInt(b.getAttribute('data-idx'),10);
      cart[i].quantity--;
      if(cart[i].quantity <= 0) cart.splice(i,1);
      saveCartToStorage(); renderCart(); updateCartCount();
    };
  });
  cartItemsEl.querySelectorAll('.remove-item').forEach(b=>{
    b.onclick = ()=>{
      const i = parseInt(b.getAttribute('data-idx'),10);
      cart.splice(i,1);
      saveCartToStorage(); renderCart(); updateCartCount();
    };
  });
}

floatingCart.addEventListener('click', ()=>{ cartModal.classList.add('show'); renderCart(); });
closeCartBtn.addEventListener('click', ()=> cartModal.classList.remove('show'));
checkoutBtn.addEventListener('click', ()=>{
  // persist cart to localStorage (done already) and redirect to checkout page (simple page)
  if(cart.length===0){ showToast('Your cart is empty'); return; }
  window.location.href = 'checkout.html'; // ensure checkout.html exists in repo
});

// hide cart when clicking outside content
cartModal.addEventListener('click', (e)=> {
  if(e.target === cartModal) cartModal.classList.remove('show');
});

/* =========================
   Init
   ========================= */
updateCartCount();
renderCart();

/* =========================
   Banner carousel logic
   ========================= */
(function initCarousel(){
  const carousel = document.querySelector('.splash-banner-carousel');
  const slides = carousel.querySelector('.slides');
  const imgs = Array.from(slides.querySelectorAll('img'));
  const prev = carousel.querySelector('.prev');
  const next = carousel.querySelector('.next');
  const dotsContainer = carousel.querySelector('.dots');
  let currentIndex = 0;
  function showSlide(idx){
    currentIndex = (idx + imgs.length) % imgs.length;
    slides.style.transform = `translateX(-${currentIndex * 100}%)`;
    dotsContainer.querySelectorAll('.dot').forEach((d,i)=> d.classList.toggle('active', i===currentIndex));
  }
  imgs.forEach((_,i)=>{
    const d = document.createElement('span');
    d.className = 'dot';
    d.addEventListener('click', ()=> showSlide(i));
    dotsContainer.appendChild(d);
  });
  prev.addEventListener('click', ()=> showSlide(currentIndex-1));
  next.addEventListener('click', ()=> showSlide(currentIndex+1));
  showSlide(0);
  // auto slide
  let auto = setInterval(()=> showSlide(currentIndex+1), 5000);
  carousel.addEventListener('mouseenter', ()=> clearInterval(auto));
  carousel.addEventListener('mouseleave', ()=> auto = setInterval(()=> showSlide(currentIndex+1), 5000));
})();

/* =========================
   Accessibility & Misc
   ========================= */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape'){
    document.getElementById('cart-modal').classList.remove('show');
  }
});
</script>
</body>
</html>
